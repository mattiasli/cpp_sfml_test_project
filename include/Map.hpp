#pragma once
#include <SFML/Graphics.hpp>
#include "Player.hpp"

class Handler;

class Map {
public:
    Map(Handler& handler);

    void updateLogic();
    void render();

    bool isTileSolid(char tile); // TODO: flyweight.
    bool isGridCoordinateSolid(sf::Vector2i gridCoordinate); // TODO: flyweight.
    bool isGridCoordinateInsideMapGrid(sf::Vector2i gridCoordinate) const;

    int getGridWidth() const;
    int getGridHeight() const;

private:
    Handler& handler;
    std::vector<std::vector<char>> mapGrid {
        {'#', '#', '#', '#', '#', '#', '#', '#', '~', '#', '#', '#', '#', '_', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
        {'#', '_', '_', '_', '_', '_', '~', '~', '~', '~', '~', '_', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', ' ', '_', '~', '~', '~', '_', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', ' ', ' ', '_', '_', '_', '_', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '_', ' ', ' ', ' ', ' ', ' ', '^', '^', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '^', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '_', ' ', ' ', ' ', ' ', '#', '#', '^', '^', '_', ' ', ' ', ' ', '#'},
        {'#', '^', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '_', ' ', '#', '~', '_', ' ', ' ', ' ', ' ', '#', '#', '#', '_', ' ', ' ', ' ', '#'},
        {'#', '^', '_', ' ', ' ', ' ', ' ', '_', '_', ' ', '_', '_', '_', '_', '_', ' ', '#', '#', '~', '_', ' ', ' ', '^', '#', '#', '#', '^', '_', ' ', ' ', ' ', '#'},
        {'#', '_', ' ', ' ', ' ', ' ', '_', '^', '~', '_', '^', '^', '^', '_', '_', '^', '#', '#', '_', ' ', ' ', ' ', '^', '#', '#', '^', '_', '_', '_', '_', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', '_', '^', '~', '~', '~', '~', '~', '^', '_', '_', '^', '#', '#', '_', ' ', ' ', ' ', ' ', '^', '^', '_', ' ', '_', '_', '_', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', '_', '^', '~', '~', '^', '~', '~', '^', '_', '_', '^', '^', '^', '_', ' ', ' ', ' ', ' ', ' ', '_', ' ', ' ', ' ', '_', ' ', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', '_', '^', '~', '~', '^', '~', '^', '_', ' ', '_', '^', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', ' ', '_', '^', '^', '_', '^', '_', ' ', ' ', ' ', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '_', '_', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', ' ', ' ', ' ', ' ', ' ', ' ', '_', '_', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '^', '^', '_', ' ', ' ', ' ', ' ', '#'},
        {'~', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '^', '~', '^', '_', ' ', ' ', ' ', ' ', '#'},
        {'~', '~', '_', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '^', '~', '^', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'~', '~', '~', '~', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '_', '~', '_', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'~', '_', '_', '_', '~', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'~', '_', '^', '_', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'~', '~', '^', ' ', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'~', '~', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '~', '~', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '~', '~', '^', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'_', '_', '~', '^', '_', ' ', ' ', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'_', '_', '~', '^', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'^', '#', '~', '#', '^', '^', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'^', '#', '~', '#', '^', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '_', '~', '_', '_', ' ', ' ', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '_', '~', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'_', '~', '~', '~', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '~', '~', '~', '~', '_', '_', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
        {'#', '~', '~', '~', '~', '~', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
    };
    bool solidTable[256] = { false };
    Player player;
};